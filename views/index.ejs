<!DOCTYPE html>
<html lang="vi">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Quản lý ảnh sản phẩm</title>
  <script src="/js/app.js" defer></script>
  <style>
    body{font-family:Segoe UI,Arial,sans-serif;margin:0;background:#f5f7fa;color:#333;overflow:hidden} /* ẩn scroll khi loading */
    .topbar{background:#2c3e50;color:#fff;padding:12px 20px;display:flex;justify-content:space-between;align-items:center;position:sticky;top:0;z-index:1000;box-shadow:0 2px 10px rgba(0,0,0,.1)}
    .topbar h1{margin:0;font-size:19px}
    .stats span{background:rgba(255,255,255,.2);padding:6px 14px;border-radius:20px;margin:0 6px;font-size:13px}
    .download{background:#3498db;padding:9px 18px;border-radius:6px;color:#fff;text-decoration:none;font-weight:bold}
    .container{max-width:1450px;margin:0 auto;padding:15px}
    #pagination{text-align:center;margin:20px 0}
    #pagination button,#pagination select{padding:8px 14px;margin:0 5px;border-radius:6px;border:1px solid #ddd;cursor:pointer}
    #pagination button:disabled{background:#eee;color:#999}
    .grid{display:grid;grid-template-columns:repeat(auto-fill,minmax(320px,1fr));gap:22px}
    .card{background:#fff;border-radius:12px;overflow:hidden;box-shadow:0 4px 15px rgba(0,0,0,.1);transition:.3s}
    .card:hover{transform:translateY(-5px)}
    .images-grid{display:grid;grid-template-columns:1fr 1fr;gap:10px;padding:12px;background:#f8f9fa}
    .img-box{position:relative;border:2px dashed #bbb;border-radius:10px;height:170px;overflow:hidden;background:#fff;cursor:pointer;transition:.3s}
    .img-box:hover,.img-box.dragover{border-color:#27ae60;background:#d5f5e3}
    .img-box img{width:100%;height:100%;object-fit:cover}
    .placeholder{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);text-align:center;color:#777}
    .placeholder strong{display:block;color:#27ae60;font-size:16px}
    .img-label{position:absolute;top:8px;left:8px;background:rgba(0,0,0,.7);color:#fff;padding:3px 8px;border-radius:4px;font-size:11px}
    .remove-btn{position:absolute;top:8px;right:8px;background:#e74c3c;color:#fff;width:28px;height:28px;border-radius:50%;border:none;font-size:16px;cursor:pointer;z-index:5}
    .download-btn{position:absolute;bottom:8px;right:8px;background:#3498db;color:#fff;width:32px;height:32px;border-radius:50%;border:none;font-size:18px;cursor:pointer;z-index:5;opacity:0;transition:opacity .3s;box-shadow:0 2px 8px rgba(0,0,0,.3)}
    .img-box:hover .download-btn{opacity:1}
    .download-btn:hover{background:#2980b9}

    /* === OVERLAY PHỦ TOÀN MÀN HÌNH === */
    #global-loading{
      position:fixed;
      top:0; left:0; right:0; bottom:0;
      background:rgba(255,255,255,0.97);
      display:flex;
      flex-direction:column;
      align-items:center;
      justify-content:center;
      z-index:99999;
      opacity:0;
      pointer-events:none;
      transition:opacity .4s ease;
    }
    #global-loading.active{
      opacity:1;
      pointer-events:auto;
    }
    #global-loading .spinner{
      width:80px; height:80px;
      border:8px solid #f0f0f0;
      border-top:8px solid #27ae60;
      border-radius:50%;
      animation:spin 1s linear infinite;
      margin-bottom:20px;
    }
    #global-loading .text{
      font-size:18px;
      font-weight:600;
      color:#27ae60;
      letter-spacing:1px;
    }
    @keyframes spin{0%{transform:rotate(0deg)}100%{transform:rotate(360deg)}}

    .info{padding:14px;text-align:center}
    .name{font-weight:bold;font-size:15px;margin-bottom:6px;color:#2c3e50}
    .status{padding:5px 12px;border-radius:20px;font-size:12px;font-weight:bold}
    .full{background:#d5f5e3;color:#27ae60}
    .lack{background:#fef9e7;color:#f39c12}
    .empty{background:#fadbd8;color:#e74c3c}
    .btn-copy{margin-top:8px;padding:8px 16px;background:#3498db;color:#fff;border:none;border-radius:6px;cursor:pointer;font-weight:bold}
    #log-box{position:fixed;bottom:10px;right:10px;max-width:420px;background:#2c3e50;color:#fff;padding:12px;border-radius:8px;box-shadow:0 4px 15px rgba(0,0,0,.4);z-index:9999;font-size:13px;max-height:200px;overflow-y:auto;opacity:0;transition:opacity .4s}
    #log-box.show{opacity:1}

    .download-btn {
  position: absolute;
  bottom: 4px;
  right: 4px;
  padding: 4px 6px;
  font-size: 12px;
  background: rgba(0, 0, 0, 0.6);
  color: white;
  border: none;
  border-radius: 4px;
  cursor: pointer;
  z-index: 5;
}
.download-btn:hover {
  background: rgba(0, 0, 0, 0.8);
}

  </style>
</head>
<body>

<!-- OVERLAY PHỦ TOÀN MÀN HÌNH -->
<div id="global-loading">
  <div class="spinner"></div>
  <div class="text">Đang tải ảnh lên, vui lòng đợi...</div>
</div>

<div class="topbar">
  <h1>QUẢN LÝ ẢNH SẢN PHẨM</h1>
  <div class="stats">
    <span>Tổng: <strong id="total">0</strong></span>
    <span style="background:#27ae60">Đủ 4: <strong id="full">0</strong></span>
    <span style="background:#f39c12">Chưa đủ: <strong id="partial">0</strong></span>
    <span style="background:#e74c3c">Chưa có: <strong id="empty">0</strong></span>
    <a href="products_with_images.csv" download class="download">TẢI CSV</a>
  </div>
</div>

<div id="pagination"></div>

<div class="container">
  <div class="grid" id="grid">Đang tải dữ liệu...</div>
</div>

<div id="log-box"></div>


</body>
</html>